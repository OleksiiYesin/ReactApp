pipeline {
  agent {
   kubernetes {
    namespace 'jenkins'
   }
   
    stages {
    
        stage('Deploy App') {
            steps {
               withKubeConfig([credentialsId: 'kubeconfig', serverUrl: 'https://172.31.12.49:6443']) {
                 sh 'kubectl apply -f react.yml -n jenkins'
               }
            }
        }
        
        stage('Finish Stage') {
            steps {
                echo "============FINISHING SLEEP==================="
                sh 'hostname'
                sh 'sleep 200'
            }
        }        

    }
}
