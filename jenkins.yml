pipeline {
  agent {
   kubernetes {
    namespace 'jenkins'
   }
  }
    stages {
    
        stage('Deploy App') {
            steps {
                withCredentials([
                    kubeconfigFile(
                    credentialsId: kubeconfig,
                    variable: 'KUBECONFIG'){
                      sh 'kubectl apply -f react.yml -n jenkins'
                ])     
            }
        }
        
        stage('Finish Stage') {
            steps {
                echo "============FINISHING SLEEP==================="
                sh 'hostname'
                sh 'sleep 200'
            }
        }        

    }
}
