pipeline {
  agent {
   kubernetes {
    namespace 'jenkins'
   }
  }
    stages {
    
        stage('Checkout Source') {
            steps {
              echo "==================CHECKOUT SOURCE==============="
              git url: 'https://github.com/OleksiiYesin/ReactApp.git', branch: 'main'
            }
        }

        stage('Deploy App') {
            steps {
              echo "==============DEPLOYING APPLICATION============="
              kubernetesDeploy(configs: "react.yml", kubeconfigId: "kubeconfig")
            }
        }
        
        stage('Finish Stage') {
            steps {
                echo "============FINISHING SLEEP==================="
                sh 'hostname'
                sh 'sleep 200'
            }
        }        

    }
}
